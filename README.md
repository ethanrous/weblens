<h1 align="center">Weblens</h1>
<h3 align="center">Self-Hosted file manager and photo server</h3>

<p align="center">
    <img width="300" src="images/brand/logo.png" alt="weblens logo" />
    <br/>
    <br/>    
    <a href="https://github.com/ethanrous/weblens/actions/workflows/go.yml"></a>
    <img alt="Weblens Fulltest" src="https://github.com/ethanrous/weblens/actions/workflows/go.yml/badge.svg?branch=main"/>
</p>
<br/>

# Overview

Weblens is a self-hosted file management and sharing system that aims to provide a simple and snappy experience.

## Features lightning round
* File management: including history, backup, and restore
* File sharing with other users and anonymous guests
* Fast and extensive global search and searching features
* Clean, productive web interface
* Media viewing and management, including video and raw photo support, metadata editing, and more
* API (still likely to include breaking changes with future updates, documentation at /docs/index.html on any running weblens server)
* Focus on performance and simplicity
* And plenty of bugs! Oh and more features too

### Roadmap
* Search and organization
   * File and media tagging and improved search
   * Local machine learning support for image recognition
* Backup
   * Core "emulation" for backup servers
   * Restore individual files from backup server
   * Direct backup to cloud storage providers
* Improved metadata editing 
* WebDav support

<br/>

# Ready to get started?
## Installation
Weblens is distributed as a Docker image. Here is a minimal docker setup to get started:
```bash
docker run --name weblens \
-p 8080:8080 \ 
-v {{ /files/on/host }}:/media/users \ 
-v {{ /cache/on/host }}:/media/cache \
-e MONGODB_URI="mongodb://weblens-mongo:27017/?replicaSet=rs0" \ # This is the default, and can be omitted, but you can change it to fit your setup, if needed.
--network weblens-net \
docker.io/ethrous/weblens:latest
```
Also, Weblens uses MongoDB. This can easily be setup using another container
```bash
docker run --name weblens-mongo \ # Name must match the MONGODB_URI above
-v {{ /db/on/host }}:/data/db \
--network weblens-net \
docker.io/ethrous/weblens-mongo:latest
```
Replace anything above with `{{ DOUBLE_BRACES }}` with values specific to your setup.

⚠️ **Note** Having the containers on the same Docker network is extremely helpful. [Read how to set up a Docker network](https://docs.docker.com/reference/cli/docker/network/create/). If you wish not to do this, you will have to modify the MONGODB_URI to something routable, and export port 27017 on the mongo container.

If you prefer to use docker-compose or want view the other configuration options, [check out the docker-compose.yml example](scripts/docker-compose.yml).

## Setup
Once you have the containers configured and running, you can begin setting up your Weblens server. 

A Weblens server can be configured as a ["core"](#weblens-core) server, or as a ["backup"](#weblens-backup) server. A core server is the main server that is used day to day, and an optional backup server is a one that mirrors the contents of 1 or more core servers. Ideally a backup server is physically distant from any core it backs up.

![WeblensSetup.png](images/screenshots/WeblensSetup.png)

### Weblens Core
If you are new to Weblens, you will want to set up a *core* server. If instead you want to create an offsite backup, see setup instructions for a [Weblens Backup](#weblens-backup) server.

Configuring a core server requires you to create an owner user, give the server a name, and optionally set the server address (e.g. if it is behind a reverse proxy)

![CoreSetup.png](images/screenshots/CoreSetup.png)

And thats it! You will be dropped into the files page, and you can begin uploading and organizing files, and inviting other users to share with.

### Weblens Backup

Weblens backup servers are designed to be a simple set-and-forget solution to keep your data safe. Unlike core servers, which need to be accessible on the internet (or via VPN, etc.), a backup server can be setup behind a firewall or on a private network, and just needs to be able to reach the core server.

⚠️ **Note** that a Backup server requires an existing [core server](#weblens-core), and for you to be an admin of that server

To configure a backup server, give it a name, the public address of the core server, and an API key generated by the core server.

![WeblensBackupConfiguration.png](images/screenshots/WeblensBackupConfiguration.png)

After setting up your backup, under the "remotes" section of the adming settings on your core server, you can now view the status of your backup server.

In the event of a disaster that takes out your core server, you can perform a "restore" operation on your backup server, and all your data will be restored to a new core server of your choosing. If, instead, you just want protection from accidental deletion of files, a core server has this functionality built in, and would not need a backup server to acomplish this.

<br/>

# Want to contribute?

Visit the [contributing instructions](CONTRIBUTING.md) for how you can help improve Weblens!

